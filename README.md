# 网络调试助手

网络调试助手是一款集多种网络通信功能（TCP、UDP）与数据库日志记录于一体的调试工具，同时支持命令行交互与图形界面（GUI）操作。该工具适用于网络调试、数据传输测试以及相关系统通信日志的记录与分析。

## 功能简介

- **TCP/UDP 通信：**  
  - TCP 服务器：支持多客户端连接、消息回显与广播。  
  - TCP 客户端：支持与服务器建立连接，数据的收发。  
  - UDP 服务器：实现广播功能，接收并转发客户端消息。  
  - UDP 客户端：进行数据收发，支持向特定服务器发送消息。

- **图形界面（GUI）：**  
  基于 tkinter 的图形用户界面，可方便地进行网络调试和消息交互，无需依赖命令行输入。

- **交互式菜单与自定义 SQL 操作：**  
  提供交互式命令行菜单，支持执行自定义 SQL 语句，同时将网络数据传输事件写入日志文件与数据库，便于后期数据分析。

- **数据库日志记录：**  
  将每次的数据传输记录（包括时间、服务类型、发送方、接收方及消息数据）写入日志文件和 MySQL 数据库中，方便系统监控和问题排查。

## 环境要求

- Python 3.6 及以上版本
- 依赖模块：
  - `mysql.connector`：用于数据库连接与操作
  - `socket`、`threading`、`queue`：用于网络通信及多线程处理
  - `tkinter`：用于构建图形用户界面
  - 其他标准库模块：`sys`、`argparse`、`datetime` 等

## 配置说明

本项目依赖以下两个配置文件：

- **config_app.py**  
  用于配置运行模式、目标主机、端口号及编码方式。其中可选的运行模式包括：
  - `tcp_server`
  - `tcp_client`
  - `udp_server`
  - `udp_client`
  - `gui`（图形界面）

  修改该文件中的配置项即可指定启动时的工作模式和网络参数。

- **config_sql.py**  
  用于配置 MySQL 数据库连接参数，包括用户名、密码、主机地址、端口、数据库名称、字符集等。请根据实际数据库环境进行修改。

## 使用说明

1. **运行环境准备：**  
   请确保已安装 Python 及上述依赖模块，同时根据需要安装 MySQL 服务并创建对应数据库。

2. **配置文件修改：**  
   根据测试环境和需求修改 `config_app.py` 和 `config_sql.py` 文件中的配置参数。

3. **启动方式：**  
   - **图形界面模式：**  
     在配置文件中将 `"mode"` 设为 `"gui"`，程序启动后将直接打开图形界面，可通过界面上的按钮选择对应的 TCP/UDP 服务器或客户端功能，并在聊天窗口中进行数据交互。
   - **命令行交互模式：**  
     将 `"mode"` 配置为 `tcp_server`、`tcp_client`、`udp_server` 或 `udp_client`，程序将在命令行中通过交互式菜单或直接输入命令进行操作。

4. **数据库日志记录：**  
   网络数据传输事件将会被写入 `network_events.log` 日志文件以及 MySQL 数据库中（需提前创建数据库）。日志记录包括操作时间、服务类型、发送方、接收方及数据内容，便于追踪和问题排查。

5. **命令行操作提示：**  
   - 在 TCP/UDP 客户端模式下，输入 `exit` 可退出发送状态。  
   - 在服务器模式下，可通过专用输入实现消息广播。  
   - 交互式菜单提供了执行自定义 SQL 查询、显示表信息、数据插入更新与删除等操作。

## 注意事项

- **安全性：**  
  请对数据库连接信息（如用户名、密码）进行妥善保管，避免敏感信息泄漏。  
- **异常处理：**  
  程序中包含了基本的异常捕获，如网络、数据库等异常情况都会记录并提示，请根据实际情况进行调试和扩展。  
- **依赖环境：**  
  GUI 模式依赖 tkinter 模块，在部分 Python 发行版中可能需要单独安装或配置。

## 项目结构

- `README.md`：本用户文档。  
- `config_app.py`：程序运行参数配置。  
- `config_sql.py`：数据库连接配置。  
- `sqlapp.py`：提供数据库操作方法（创建表、插入数据、更新数据等）。  
- `app.py`：程序主入口，整合网络模块、图形界面和数据库日志记录功能。

## 联系与反馈

如有问题或建议，请联系项目维护者或在对应的代码托管平台提交 Issue 进行反馈。

---

本项目旨在为用户提供一个开箱即用、功能全面的网络调试工具，希望本说明文档能帮助您快速上手并应用于实际开发与调试中。